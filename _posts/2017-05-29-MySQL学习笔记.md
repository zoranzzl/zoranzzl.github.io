---
layout: post
title: MySQL学习笔记
author: zoranzzl
---

# 第1章：初涉MySQL

---
#### ●启停MySQL服务：



  启动mysql服务：
>     net start mysql


  停止mysql服务：
>     net stop mysql


  启停其他windows服务也是用[net start/stop 服务]

#### ●MySQL的登录与退出：

1.MySQL登录/退出：登录客户端，向服务器发送指令。[mysql 参数]

常用的MySQL参数：
~~~
      mysql -V ：输出MySQL版本信息并退出
      mysql -u ：用户名
      mysql -p ：密码
      mysql -P ：端口号
      mysql -h ：服务器名称（本地回环地址：127.0.0.1）
      mysql -D ：打开指定数据库
~~~
2.登录指令：
>     mysql -u root -p -P 3306 -h 127.0.0.1

  说明：

（1）.-p后面没有输入密码，按下enter键之后，系统会提示输入密码。也可以在-p之后直接输入密码作为参数（明码）。

（2）.如何MySQL默认端口为3306，未曾被修改过，则-P的参数可以不加。

（3）.如果连接的是本地服务器，则-h后面的参数也可以不加。

（4）.默认为3306端口和本地服务器。

3.MySQL退出(以下三个命令都可以)：
>
         MySQL > exit;
         MySQL > quit;
         MySQL > \q;

#### ●修改MySQL提示符
即修改提示符‘MySQL >’.两种方式实现：

（1）.连接客户端时通过参数指定：
>
      C:\Windows\system32>mysql -u root -pzzl12345 --prompt \h

（2）.连接上客户端之后，通过prompt命令修改：
>
       MySQL>prompt 提示符

#### ●几个简单的MySQL提示符：
>
    参数    描述
    \D      完整的日期
    \d      当前数据库
    \h      服务器名称
    \u      当前用户

####●MySQL常用命令:

   (1).显示当前服务器版本：
>     SELECT VERSION();
     
   (2).显示当前日期时间：
>      SELECT NOW();
    
   (3).显示当前用户：
>     SELECT USER();
注意：命令全部是大写输入！(亲测好像大小写都可以实现命令......)

####●MySQL语句的规范：

   1.关键字与函数名称全部大写；（关键字与函数名称小写系统也是可以识别，但为了区分最好遵照规范）

   2.数据库名称、表名称、字段名称全部小写；

   3.SQL语句必须以分号结尾；

####●操作数据库：

1.创建数据库：
>
      CREATE { DATABASE | SCHEMA } [ IF NOT EXISTS]     db_name
      [ DEFAULT ] CHARACTER SET [=] charset_name                  //指定编码方式，默认编码方式为utf8

2.查看当前服务器下的数据库：

>      SHOW DATABASES；（显示当前服务器下所有数据库） 
 
3.当输入指令执行后产生警告，可以查看警告：
   
>       SHOW WARNINGS；

4.查看数据库所使用的编码方式（显示数据库创建的时候所使用的的指令，可以显示这个信息）：

>     SHOW CREATE DATABASE db_name;

5.修改数据库（可以修改编码方式等）：
>
     ALTER [ DATABASE | SCHEMA } [ db_name ]
     [DEFAULT] CHARACTER SET [=] charset_name

6.删除数据库：
  
>     DROP {DATABASE | SCHEMA}  [IF EXISTS] db_name

##第1章总结：

1.MySQL默认端口：3306

2.MySQL超级用户：root

3.创建数据库：CREATE DATABASE

4.修改数据库：ALTER DATABASE

5.删除数据库：DROP DATABASE

</br>

</br>

</br>

#第2章：数据类型与操作数据表

---

####●MySQL数据类型

数据类型是指列、存储过程参数、表达式和局部变量的数据特征，它决定了数据的存储格式，代表了不同的信息类型。
 
1.MySQL数据类型之整形

| 数据类型 | 存储范围 | 字节数 |
| ------- | ------- | ----- |
| TINYINT | 有符号值：-128到127 | 一个字节 |
|       | 无符号值：0到255 |           |
| SMALLINT | 有符号值：-32768到132767 | 两个字节|
|         | 无符号值：0到65535 |              |
| MEDIUMINT | 有符号值：-8388608到8388607 | 三个字节 |
|          | 无符号值：0到16777215 |           |
| INT | 有符号值：-2147483648到2147483647 | 四个字节 |
|       | 无符号值：0到4294967295 |           |


原则：选择最合适的数据类型，而非最重大的数据类型。

2.MySQL数据类型之浮点型

数据类型         存储范围
FLOAT[(M,D)]     -3.04282346E+38到-1.175494351E-38、0和1.175494351E-38到3.04282346E+38
                 M是数字总位数，D是小数点后面的位数。如果M和D被省略，根据硬件允许的限制来保存值。
                 单精度浮点数精确到大约7位小数

DOUBLE[(M,D)]    双精度浮点数

3.MySQL数据类型之日期时间类型

列类型      存储要求    存储范围及说明
YEAR         1          存储范围：存储两位或者四位，默认四位，可允许1970到2069之间的一个时期
TIME         3          存储范围：-8385959到8385959之间的一个时间类型
DATE         3          支持日期：1000年1月1日-9999年12月31日之间的日期
DATATIME     8          支持时间：1000年1月1日 00:00:00-9999年12月31日 23:59:59
TIMESTAMP    4          支持范围：1970年1月1日零点起-2037年之间的一个值（时间戳）

4.MySQL数据类型之字符型

列类型                         存储需求
CHAR(M)                         M个字节，0<=M<=255,定长类型(没有达到指定长度，以空格补齐)
VARCHAR(M)                      L+1个字节，其中L<=M且0<=M<=65535
TINYTEXT                        L+1个字节，其中L<2的8次方
TEXT                            L+2个字节，其中L<2的16次方
MEDIUMTEXT                      L+3个字节，其中L<2的24次方
LONGTEXT                        L+4个字节，其中L<2的32次方
ENUM('values','values2',...)    1或2个字节，取决于枚举值的个数（最多65535个值））
SET('values','values2',...)     1、2、4或者8个字节，取决于set成员的数目（最多64个成员）

●操作数据表
数据表（或者称为表）是数据库重要组成部分，是其他对象的基础。
存储数据，首先要设计数据表。数据表是数据库的重要部分，所以首先要通过USE命令打开某个数据库
   USE 数据库名称   --打开（使用）某个数据库
 注：如何验证当前打开的数据库就是期望打开的数据库？
     可以使用命令：
        SELECT DATABASE();
     这个命令可以显示当前用户所打开的数据库。
1.MySQL创建数据表:

CREATE TABLE [IF NOT EXISTS] table_name(
   column_name data_type,
   ...
)

创建数据表示例：
create table if not exists tb1(
    -> username VARCHAR(20),
    -> age TINYINT UNSIGNED,
    -> salary FLOAT(8,2) UNSIGNED
    -> );

2.MySQL查看数据表:
（查看数据表是否真实存在）
查看数据表列表：

SHOW TABLES [FROM db_name]
[LIKE 'pattern' | WHERE EXPR]

不仅可以查看当前数据库下的数据表列表，还可以查看其他数据库下的数据表列表。


3.MySQL查看数据表结构:

SHOW COLUMNS FROM tbl_name


3.MySQL记录插入与查找:

插入记录： INSERT [INTO] tb_name [(col_name,...)] VALUES (val,...)

可以只为部分属性赋值。
列名称可以省略，但此时必须为所有的属性字段赋值。

记录查找：SELECT expr，... FROM tb_name
（简单的使用，稍后升入讲解）

4.MySQL空值与非空：

在创建数据表的时候可以指定字段值是否可以为空值（作为一种属性）
NULL，字段值可以为空
NOT NULL，字段值禁止为空

空值与非空示例：
mysql> create table tb2(
    -> username VARCHAR(20) NOT NULL,
    -> age TINYINT UNSIGNED NULL
    -> );

5.MySQL自动编号：
在记需要保证记录的唯一性，即在数据库当中，这条记录不能重复。如果想不存在重复的记录
可以为某一个字段添加 AUTO_INCREMENT 属性。

AUTO_INCREMENT --自动编号
（1）.自动编号，且必须与主键组合使用。
（2）.默认情况下，起始值为1，每次的增量为1。

6.MySQL初涉主键约束

PRIMARY KEY
（1）.主键约束
（2）.每张数据表只能存在一个主键
（3）.主键保证记录的唯一性
（4）.主键自动为NOT NULL

自动编号与主键组合使用：
 create table tb3(
    -> id SMALLINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    -> username VARCHAR(30) NOT NULL
    -> );

6.MySQL初涉唯一约束
（1）.唯一约束一张表可以有多个，主键约束一张表只能有一个。（创建索引的时候也是有区别的）
（2）.唯一约束可以保证记录的唯一性
（3）.唯一约束的字段可以为控制（NULL）
（4）.每张数据表

注意：唯一约束可以为空，就代表两条或两条以上的记录该字段的值都可以为空，
      那么该字段的值就是相同的，值可以相同又和保证唯一性的要求是相互背离的。
      但实际上他们在存储的时候，即使存储了多个值，但最终保留的空值也只有一个，
      这就是所谓的保证唯一性。

添加唯一约束示例：
 create table tb5(
    -> id SMALLINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    -> username VARCHAR(20) NOT NULL UNIQUE KEY,
    -> age TINYINT UNSIGNED)
    -> ;

7.MySQL初涉默认约束

DEFAULT
（1）.默认值
（2）.当插入记录时，如果没有明确为字段赋值，则自动赋予默认值。

默认值的使用
a.创建数据表，定义默认值:
 create table tb6(
    -> id smallint unsigned auto_increment primary key,
    -> username varchar(20) not null unique key,
    -> sex enum('1','2','3') default '3'
    -> );

b.插入部分字段的值（不包含设有默认值的字段）
 
insert tb6(username) values('Tom');

c.查询表中会出现该设有默认值字段的默认值：
+----+----------+------+
| id | username | sex  |
+----+----------+------+
|  1 | Tom      | 3    |
+----+----------+------+

总结：
数据类型 ：字符型
           整形
           浮点型
           日期时间型
           
数据表操作：插入记录
           查找记录

记录操作：创建数据表
          约束的使用


